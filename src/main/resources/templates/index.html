<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/layout :: head('Accueil')}">
    <title>Accueil - FotoShare</title>
</head>
<body class="d-flex flex-column min-vh-100">
    <!-- Navigation -->
    <nav th:replace="~{fragments/layout :: navbar}"></nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container text-center">
            <h1 class="display-4 fw-bold mb-4">Partagez vos photos en toute sécurité</h1>
            <p class="lead mb-5">Stockez, organisez et partagez vos précieux souvenirs avec les personnes qui comptent pour vous.</p>
            <div sec:authorize="!isAuthenticated()">
                <a th:href="@{/register}" class="btn btn-light btn-lg me-3">
                    <i class="bi bi-person-plus me-2"></i>Créer un compte
                </a>
                <a th:href="@{/gallery}" class="btn btn-outline-light btn-lg">
                    <i class="bi bi-images me-2"></i>Explorer la galerie
                </a>
            </div>
            <div sec:authorize="isAuthenticated()">
                <a th:href="@{/photos/upload}" class="btn btn-light btn-lg me-3">
                    <i class="bi bi-cloud-upload me-2"></i>Uploader une photo
                </a>
                <a th:href="@{/photos/my}" class="btn btn-outline-light btn-lg">
                    <i class="bi bi-images me-2"></i>Mes photos
                </a>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">Pourquoi choisir FotoShare ?</h2>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="text-center p-4">
                        <div class="feature-icon mx-auto">
                            <i class="bi bi-shield-lock"></i>
                        </div>
                        <h4>Sécurisé</h4>
                        <p class="text-muted">Vos photos sont protégées avec un chiffrement de niveau entreprise et un contrôle d'accès granulaire.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="text-center p-4">
                        <div class="feature-icon mx-auto">
                            <i class="bi bi-people"></i>
                        </div>
                        <h4>Partage Intelligent</h4>
                        <p class="text-muted">Partagez vos photos avec qui vous voulez, avec des niveaux de permission personnalisables.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="text-center p-4">
                        <div class="feature-icon mx-auto">
                            <i class="bi bi-folder2-open"></i>
                        </div>
                        <h4>Organisé</h4>
                        <p class="text-muted">Créez des albums et organisez vos photos de manière intuitive.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Recent Public Photos -->
    <section class="py-5" th:if="${recentPhotos != null and !recentPhotos.isEmpty()}">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>Photos récentes</h2>
                <a th:href="@{/gallery}" class="btn btn-outline-primary">Voir tout <i class="bi bi-arrow-right"></i></a>
            </div>
            <div class="row g-4">
                <div class="col-6 col-md-4 col-lg-3" th:each="photo : ${recentPhotos}">
                    <div th:replace="~{fragments/layout :: photoCard(${photo})}"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Empty State if no photos -->
    <section class="py-5 flex-grow-1" th:if="${recentPhotos == null or recentPhotos.isEmpty()}">
        <div class="container text-center">
            <i class="bi bi-images display-1 text-muted mb-4"></i>
            <h3 class="text-muted">Aucune photo publique pour le moment</h3>
            <p class="text-muted">Soyez le premier à partager une photo avec la communauté !</p>
            <a th:href="@{/register}" class="btn btn-primary" sec:authorize="!isAuthenticated()">
                <i class="bi bi-person-plus me-2"></i>Créer un compte
            </a>
            <a th:href="@{/photos/upload}" class="btn btn-primary" sec:authorize="isAuthenticated()">
                <i class="bi bi-cloud-upload me-2"></i>Uploader une photo
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer th:replace="~{fragments/layout :: footer}"></footer>

    <!-- Scripts -->
    <th:block th:replace="~{fragments/layout :: scripts}"></th:block>
</body>
</html>